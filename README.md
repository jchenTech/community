## 项目简介

本项目是一个基于SpringBoot的社区平台，实现了邮箱注册、验证码登录、发帖、评论、私信、点赞、关注、统计网站访问次数等功能，数据库使用MySQL、Redis，使用Kafka构建系统通知，使用Elasticsearch构建全文搜索功能，使用前缀树实现敏感词过滤，同时实现生成pdf文件，网站UV和DAU统计，并将用户头像等信息存于七牛云服务器。

## 技术架构图
图片源自：https://github.com/wao3/flow
![架构图](https://camo.githubusercontent.com/b0a45b5d72948f755b33c110c2ddef8575869ec0dfa18b94e715210660bf095d/68747470733a2f2f692e6c6f6c692e6e65742f323032312f30332f31342f436d714b57347058556a39464e5a332e706e67)



## 功能实现

- 使用Spring Security 做权限控制，替代拦截器的拦截控制，并使用自己的认证方案替代Security 认证流程，使权限认证和控制更加方便灵活。
- 使用Redis的set实现点赞，zset实现关注，并使用Redis存储登录ticket和验证码，解决分布式session问题。
- 使用Redis高级数据类型HyperLogLog统计UV(Unique Visitor),使用Bitmap统计DAU(Daily Active User)。
- 使用Kafka处理发送评论、点赞和关注等系统通知，并使用事件进行封装，构建了强大的异步消息系统。
- 使用Elasticsearch做全局搜索，并通过事件封装，增加关键词高亮显示等功能。
- 对热帖排行模块，使用分布式缓存Redis和本地缓存Caffeine作为多级缓存，避免了缓存雪崩，将QPS提升了20倍(10-200)，大大提升了网站访问速度。并使用Quartz定时更新热帖排行。



## 详细功能

- 注册，登录
- 用户信息
  - 修改头像
  - 修改密码
- 前缀树敏感词过滤
- 权限管理
  - 访客可以浏览主题、回复
  - 普通用户除以上功能外，还可以私信、点赞主题和回复、发表主题和回复
  - 管理员除以上功能外，还可以置顶主题、加精主题、删除主题
  - 站长除以上功能外，还可以查看站点数据统计
- 主题模块
  - 发表主题
  - 支持查看单个节点下的主题
  - 支持按全站热度排行主题
- 评论模块
  - 发表评论
  - 二级评论功能
- 私信模块
  - 发送私信
  - 统计未读私信数量
  - 查看私信列表和私信详情
- 点赞模块
  - 支持点赞主题、评论、二级评论
  - 统计主题点赞数量
  - 统计用户获赞数量
- 关注模块
  - 关注用户
  - 统计用户的关注数量和粉丝数量
  - 支持查看用户的关注列表和粉丝列表
- 通知模块
  - 统计未读通知数量
  - 支持评论、点赞、关注三种通知
- 搜索模块
  - 关键词高亮
  - 近实时搜索
- 数据统计
  - 统计今日 UV（访客）和 DAU（日活跃用户）
  - 图表展示日期范围 UV 和 DAU
